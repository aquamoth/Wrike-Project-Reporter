(this["webpackJsonpwrike-project-reporter"]=this["webpackJsonpwrike-project-reporter"]||[]).push([[0],{23:function(e,t,n){},25:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),s=(n(23),n(3)),l=n(4),i=n.n(l),u=n(7),d=n(5),p=n.p+"static/media/logo.6ce24c58.svg",f=(n(25),n(18)),h=n.n(f),v=n(46);var g=function(){var e=Object(v.a)(),t=Object(d.a)(e,3),n=t[0],c=t[1],o=(t[2],n.oauthToken||""),s=Object(a.useState)(""),l=Object(d.a)(s,2),f=l[0],h=l[1],g=Object(a.useState)({}),j=Object(d.a)(g,2),k=j[0],b=j[1],E=Object(a.useState)([]),y=Object(d.a)(E,2),O=y[0],w=y[1],x=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),w([]),e.prev=2,e.next=5,m(o);case 5:t=e.sent,b(t.folderDictionary),w(t.projectsWithoutTasks),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.isAxiosError?h("(".concat(e.t0.response.status,") ").concat(JSON.stringify(e.t0.response.data))):(console.error(e.t0),h("An unhandled exception occurred. See the console for details!"));case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),I=null===O||void 0===O?void 0:O.map((function(e){for(var t=[],n=e;n;)t.unshift(n.title),n=k[n.parentIds[0]];return{id:e.id,title:e.title,permalink:e.permalink,path:t.join("/")}}));return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:p,className:"App-logo",alt:"logo"}),r.a.createElement("textarea",{onChange:function(e){c("oauthToken",e.target.value,{maxAge:2592e3})}},o),r.a.createElement("button",{disabled:""===o,onClick:x},"Call Wrike"),r.a.createElement("div",{style:{color:"red"}},f),r.a.createElement("ul",null,I.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("a",{href:e.permalink,target:"_blank",rel:"noopener noreferrer"},e.path))})))))};function m(e){return j.apply(this,arguments)}function j(){return(j=Object(u.a)(i.a.mark((function e(t){var n,a,r,c,o,l,u,d,p,f,v,g,m,j;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Calling Wrike"),n=h.a.create({baseURL:"https://www.wrike.com/api/v4/",headers:{authorization:"Bearer "+t}}),e.next=4,n.get("folders?project=true&deleted=false");case 4:return a=e.sent,r=a.data.data,console.log("Received ".concat(r.length," projects")),e.next=9,n.get("tasks?status=Active&fields=['parentIds','superParentIds']");case 9:return c=e.sent,o=c.data.data,console.log("Received ".concat(o.length," tasks")),e.next=14,n.get("folders?project=false&deleted=false");case 14:l=e.sent,u=l.data.data,console.log("Received ".concat(u.length," folders")),d={},p=Object(s.a)(u);try{for(p.s();!(f=p.n()).done;)v=f.value,d[v.id]=v}catch(i){p.e(i)}finally{p.f()}return g=k(r),console.log("".concat(g.length," projects in progress")),m=b(o),j=g.filter((function(e){return!(e.id in m)})),console.log("".concat(j.length," projects have no tasks")),e.abrupt("return",{folderDictionary:d,projectsWithoutTasks:j});case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return e.filter((function(e){return"IEAEEOG5K7733RZD"===e.workflowId})).filter((function(e){return"IEAEEOG5JMBYF5CY"===e.project.customStatusId}))}function b(e){var t,n={},a=Object(s.a)(e);try{for(a.s();!(t=a.n()).done;){var r,c=t.value,o=Object(s.a)(c.parentIds);try{for(o.s();!(r=o.n()).done;){var l=r.value;l in n||(n[l]=[]),n[l].push(c.id)}}catch(p){o.e(p)}finally{o.f()}var i,u=Object(s.a)(c.superParentIds);try{for(u.s();!(i=u.n()).done;){var d=i.value;d in n||(n[d]=[]),n[d].push(c.id)}}catch(p){u.e(p)}finally{u.f()}}}catch(p){a.e(p)}finally{a.f()}return n}var E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g,null)),document.getElementById("root")),E()}},[[44,1,2]]]);
//# sourceMappingURL=main.a8d6d1b1.chunk.js.map